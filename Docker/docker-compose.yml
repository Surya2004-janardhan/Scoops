# Docker Compose Template
# Multi-service setup: Node.js backend, frontend, Python backend

version: '3.8'

services:
  backend:
    build: ./backend
    ports:
      - "5000:5000"
    volumes:
      - ./backend:/app
    environment:
      - NODE_ENV=development

  frontend:
    build: ./frontend
    ports:
      - "3000:3000"
    volumes:
      - ./frontend:/app
    environment:
      - NODE_ENV=development

  python-backend:
    build: ./python-backend
    ports:
      - "8000:8000"
    volumes:
      - ./python-backend:/app
    environment:
      - PYTHON_ENV=development

# ============================================================
# DOCKER CHEATSHEET - Commands ordered by frequency of use
# ============================================================

# ───────────────────────────────────────────────────────────
# ESSENTIAL (Most Used)
# ───────────────────────────────────────────────────────────

# Start containers in background
# docker-compose up -d

# Stop and remove all containers
# docker-compose down

# View running containers
# docker ps

# View all containers (including stopped)
# docker ps -a

# View container logs
# docker logs <container_id>

# Follow logs in real-time
# docker logs -f <container_id>

# Stop a running container
# docker stop <container_id>

# Remove a container
# docker rm <container_id>

# ───────────────────────────────────────────────────────────
# BUILDING & RUNNING
# ───────────────────────────────────────────────────────────

# Build image from Dockerfile
# docker build -t <image_name> .

# Run container from image
# docker run -d -p <host_port>:<container_port> <image_name>

# Build all services in docker-compose
# docker-compose build

# Rebuild without cache
# docker-compose build --no-cache

# ───────────────────────────────────────────────────────────
# CONTAINER MANAGEMENT
# ───────────────────────────────────────────────────────────

# Access container shell
# docker exec -it <container_id> bash

# Access specific service shell
# docker-compose exec <service_name> bash

# Restart containers
# docker-compose restart

# Stop containers
# docker-compose stop

# Scale a service
# docker-compose scale <service_name>=<number_of_instances>

# ───────────────────────────────────────────────────────────
# IMAGES
# ───────────────────────────────────────────────────────────

# List all images
# docker images

# Remove an image
# docker rmi <image_id>

# Pull image from registry
# docker pull <image_name>

# Push image to registry
# docker push <image_name>

# ───────────────────────────────────────────────────────────
# DEBUGGING & MONITORING
# ───────────────────────────────────────────────────────────

# Real-time resource stats
# docker stats

# Running processes in container
# docker top <container_id>

# Detailed container info
# docker inspect <container_id>

# Validate docker-compose config
# docker-compose config

# ───────────────────────────────────────────────────────────
# NETWORKS
# ───────────────────────────────────────────────────────────

# List networks
# docker network ls

# Create network
# docker network create <network_name>

# Remove network
# docker network rm <network_name>

# ───────────────────────────────────────────────────────────
# CLEANUP
# ───────────────────────────────────────────────────────────

# Remove unused images
# docker image prune

# Remove all unused resources
# docker system prune

# Remove volumes too
# docker system prune -a --volumes

# ───────────────────────────────────────────────────────────
# WATCH COMMANDS (Real-time monitoring)
# ───────────────────────────────────────────────────────────

# Watch containers every second
# watch -n 1 docker ps

# Watch logs every second
# watch -n 1 "docker logs <container_id>"

# ───────────────────────────────────────────────────────────
# VERSION INFO
# ───────────────────────────────────────────────────────────

# Docker version
# docker --version

# Docker Compose version
# docker-compose version